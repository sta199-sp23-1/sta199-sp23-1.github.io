{
  "hash": "ab5ea845c14b4c3759593b7efd43778a",
  "result": {
    "markdown": "---\ntitle: \"Conditional probability\"\nsubtitle: \"STA 199\"\neditor: source\nformat: html\nexecute:\n  error: true\n---\n\n\n## Bulletin\n\n-   this `ae` is **due for grade**. Push your completed ae to GitHub within 48 hours to receive credit\n-   [Click here](https://classroom.github.com/a/GMQtFgcP) to make your `ae-11` repo\n-   team announcement in slack. sign-up for teams by 5:00pm today. \n-   homework 02 [released](/hw/hw-2.html)\n\n## Recap: last time\n\n- What is our definition of probability?\n\n- Let $A$ be an event. What is $A^C$? What is pr($A$) + pr($A^C$)?\n\n- Based on the contingency table from last time, which events are disjoint?\n\n## Getting started\n\nClone *your* `ae11-username` repo from the [GitHub organization](https://github.com/sta199-sp23-1/).\n\n# Today\n\nBy the end of today you will \n\n- be able to define and compute **marginal**, **joint** and **conditional** probabilities\n- identify when events are independent\n- apply Bayes' theorem to examine COVID test specificity\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(knitr)\n```\n:::\n\n\n## Definitions\n\nLet A and B be events.\n\n-   **Marginal probability:** The probability an event occurs regardless of values of other events\n    - *P(A)*\n    - Example: What's the probability a student in STA199 favors dogs?\n\n-   **Joint probability**: The probability two or more events simultaneously occur\n    - Example: What's the probability a student is a junior **and** favors dogs?\n    - *P(A and B)* \n  \n-   **Conditional probability**: The probability an event occurs given the other has occurred\n    - *P(A|B)* or *P(B|A)*\n    - Eample: What is the probability a student is a junior **given** they favor dogs?\n\n-   **Independent events**: Knowing one event has occurred does not lead to any change in the probability we assign to another event.\n    - *P(A|B) = P(A)* or *P(B|A) = P(B)*\n    - Example: P(Junior | dogs) = P(junior)\n\n## Bayes' Theorem\n\nIn 2020, the FDA enacted emergency authorization for a number of serological tests for COVID-19. From the FDA website: \n\n> Serology tests detect the presence of antibodies in the blood from the bodyâ€™s adaptive immune response to an infection, like COVID-19. They do not detect the virus itself. In the early days of an infection when the body's adaptive immune response is still building, antibodies may not be detected. \n\nFull details of these tests may be found on the FDA's website [here](https://www.fda.gov/medical-devices/coronavirus-disease-2019-covid-19-emergency-use-authorizations-medical-devices/eua-authorized-serology-test-performance).\n\nWe will define the following events:\n\n-   **Pos**: The event the Alinity test returns positive.\n-   **Neg**: The event the Alinity test returns negative.\n-   **Covid**: The event a person has COVID\n-   **No Covid**: The event a person does not have COVID\n\nAssume the Abbott Alinity test has an estimated sensitivity of 100%, *P(Pos \\| Covid) = 1*, and specificity of 99%, *P(Neg \\| No Covid) = 0.99*.\n\nSuppose the prevalence of COVID-19 in the general population is about 2%, *P(Covid) = 0.02*.\n\n#### Exercise 1\n\nUse the \"hypothetical 10,000\" to calculate the probability a person has COVID given they get a positive test result, i.e. *P(Covid | Pos)*.\n\n|           | Covid | No Covid | Total |\n|-----------|-------|----------|-------|\n| **Pos**   |       |          |       |\n| **Neg**   |       |          |       |\n| **Total** |       |          | 10000 |\n\n\n#### Exercise 2\n\nUse Bayes' Theorem to calculate *P(Covid|Pos)*. \n\n## Simpson's paradox\n\nThis example comes from *Confounding and Simpson's paradox*^[Julious, S A, and M A Mullee. \"Confounding and Simpson's paradox.\" BMJ (Clinical research ed.) vol. 309,6967 (1994): 1480-1. doi:10.1136/bmj.309.6967.1480] by Julious and Mullee.\n\nThe data examines 901 individuals with diabetes and includes the following variables\n\n- `insulin_dep`: whether or not the patient has *insulin dependent* or *non-insulin dependent* diabetes\n- `less_than_40`: whether or not the individual is less than 40 years old\n- `survival`: whether or not the individual survived the length of the study\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndiabetes = read_csv(\"https://sta101.github.io/static/appex/data/diabetes.csv\")\n```\n:::\n\n\nOne might be interested in the mortality associated with each type of diabetes. What's the marginal probability of survival for insulin independent and insulin dependent diabetes?\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# code here\n```\n:::\n\n\nWhat about the probability conditional on age group?\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# code here\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}