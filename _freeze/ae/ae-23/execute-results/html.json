{
  "hash": "cb7f85620726cd83ee13e3261c266d73",
  "result": {
    "markdown": "---\ntitle: \"Hypothesis tests and confidence intervals\"\nsubtitle: \"STA 199\"\neditor: source\nformat: html\nexecute:\n  error: true\n---\n\n\n## Bulletin\n\n-   this `ae` is **due for grade**. Push your completed ae to GitHub within 48 hours to receive credit\n- [project draft report](https://sta199-sp23-1.github.io/project-description.html) due to GitHub today\n- [homework 5](/hw/hw-5.html) due next Thursday\n- Exam 2 next Friday\n\n## Getting started\n\nClone *your* `ae23-username` repo from the [GitHub organization](https://github.com/sta199-sp23-1/).\n\n\n## Today\n\nBy the end of today you will...\n\n- define type I and type II error\n- compare hypothesis tests with confidence intervals\n- practice conducting hypothesis tests\n\n\n## Load packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidymodels)\nlibrary(openintro)\n```\n:::\n\n\n## Practice\n\n### Load data\n\nThe `stent30` data set comes from the `openintro` package and is from a study conducted in 2011 on the effects of arterial stents as a therapy for stroke patients. See the original publication:\n\nChimowitz MI, Lynn MJ, Derdeyn CP, et al. 2011. Stenting versus Aggressive Med- ical Therapy for Intracranial Arterial Stenosis. New England Journal of Medicine 365:993- 1003. doi: 10.1056/NEJMoa1105335.\n\nor check `?stent30` for more information.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(stent30)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(stent30)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 451\nColumns: 2\n$ group   <fct> treatment, treatment, treatment, treatment, treatment, treatme…\n$ outcome <fct> stroke, stroke, stroke, stroke, stroke, stroke, stroke, stroke…\n```\n:::\n:::\n\n\n#### Exercise 1\n\nDo stents affect stroke outcome in patients?\n\n-   Write the null and alternative hypothesis. Report the observed statistic.\n\n-   Simulate under the null.\n\n-   Compute and report the p-value, compare to $\\alpha = 0.05$ and make a conclusion with appropriate context\n\n\n## Confidence intervals and hypothesis tests\n\nHere we revisit the data from the first three seasons of NC Courage games (2017-2019).\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncourage = read_csv(\"https://sta101-fa22.netlify.app/static/labs/data/courage.csv\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(courage)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 78\nColumns: 10\n$ game_id     <chr> \"washington-spirit-vs-north-carolina-courage-2017-04-15\", …\n$ game_date   <chr> \"4/15/2017\", \"4/22/2017\", \"4/29/2017\", \"5/7/2017\", \"5/14/2…\n$ game_number <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,…\n$ home_team   <chr> \"WAS\", \"NC\", \"NC\", \"BOS\", \"ORL\", \"NC\", \"NC\", \"CHI\", \"NC\", …\n$ away_team   <chr> \"NC\", \"POR\", \"ORL\", \"NC\", \"NC\", \"CHI\", \"NJ\", \"NC\", \"KC\", \"…\n$ opponent    <chr> \"WAS\", \"POR\", \"ORL\", \"BOS\", \"ORL\", \"CHI\", \"NJ\", \"CHI\", \"KC…\n$ home_pts    <dbl> 0, 1, 3, 0, 3, 1, 2, 3, 2, 3, 0, 0, 2, 1, 1, 0, 1, 2, 2, 2…\n$ away_pts    <dbl> 1, 0, 1, 1, 1, 3, 0, 2, 0, 1, 1, 1, 0, 0, 0, 1, 2, 0, 3, 1…\n$ result      <chr> \"win\", \"win\", \"win\", \"win\", \"loss\", \"loss\", \"win\", \"loss\",…\n$ season      <dbl> 2017, 2017, 2017, 2017, 2017, 2017, 2017, 2017, 2017, 2017…\n```\n:::\n:::\n\n\nDo National Women's Soccer League (NWSL) teams have a home-field advantage? We'll answer this question in a few separate ways.\n\nHypothesis testing framework: does NC Courage score a significantly different number of points (on average) away than at home?\n\n#### Exercise 2 \n\n- Create a new column `location` that tells you whether the courage are \"home\" or \"away\"\n- Create a new column `pts` that always reports the Courage points scored in a game.\n- Save your result as a new data frame titled `courage2`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# code here\n```\n:::\n\n\n#### Exercise 3\n\nTo answer the question *does NC Courage score a significantly different number of points (on average) away than at home?*\n\n- Write the null and alternative hypothesis. Report the observed statistic.\n\n- Simulate under the null.\n\n- Compute and report the p-value, compare to $\\alpha = 0.05$ and make a conclusion with appropriate context\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# code here\n```\n:::\n\n\n\n#### Exercise 4\n\n- Report the mean difference between away and home games and report a 95% bootstrap confidence interval. Use `set.seed(3)` and `reps=5000` Interpret your interval in context.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# code here\n```\n:::\n\n\n\n#### Exercise 5\n\nIs there a better way we could investigate whether or not the Courage have a home-field advantage? Why?\n\n## Notes\n\n### Type 1 and Type 2 Errors\n\n| Truth         | Reject the null | Fail to reject the null |\n|---------------|-----------------|-------------------------|\n| $H_0$ is true | Type 1 error    | ✔️                      |\n| $H_A$ is true | ✔️              | Type 2 error            |\n\nThe significance level, $\\alpha$, is the probability of a type 1 error. In some contexts, a type 1 error may be referred to as a \"false positive\" and a type 2 error as a \"false negative\".\n\nIntuitively, by considering extremes, one can see a trade-off exists between type 1 and type 2 error. \\\n\\\nIf $\\alpha = 0$, then the p-value stands no chance of being smaller than $\\alpha$ and we always fail to reject the null. This makes type 1 errors impossible.\\\n\\\nSimilarly, if $\\alpha = 1$, then all p-values will be smaller than $\\alpha$ and type 2 errors will become impossible, because we will always reject the null.\n\n$\\beta$ is used to denote the probability of a type 2 error.\n\nThe power of a test is $1 - \\beta$, which is the probability that your test rejects the null hypothesis when the null hypothesis is false.\n\n## Why it's important to be careful with interpretation\n\n#### (And why hypothesis tests don't tell the whole story)\n\nThe data for this example comes from Confounding and Simpson’s paradox^[Julious, S A, and M A Mullee. “Confounding and Simpson’s paradox.” BMJ (Clinical research ed.) vol. 309,6967 (1994): 1480-1. doi:10.1136/bmj.309.6967.1480] by Julious and Mullee.\n\nThe data examines 901 individuals with diabetes and includes the following variables\n\n- `insulin_dep`: whether or not the patient has insulin dependent or non-insulin dependent diabetes\n- `age`: whether or not the individual is less than 40 years old\n- `survival`: whether or not the individual survived the length of the study\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndiabetes = read_csv(\"https://sta101.github.io/static/appex/data/diabetes.csv\")\n```\n:::\n\n\nFlex Aisher thinks people with insulin dependent diabetes actually survive longer than those without insulin dependence. Flex wants to formally test his hypothesis.\n\nLet $p_{d}$ be the probability of insulin *dependent* survival and $p_{i}$ be the probability of insulin independent survival.\n\n\n$$\nH_0: p_{d} - p_{i} = 0\n$$\n\n$$\nH_A: p_{d} - p_{i} > 0\n$$\n\n\nAt first glance the data seem to back up his claim...\n\n#### Exercise 6\n\nCompute the probability of survival and death for diabetic individuals with and without insulin dependence.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#  code here\n```\n:::\n\n\n#### Exercise 7\n\nIs Flex's claim significant at the $\\alpha = 0.05$ level? Perform a hypothesis test and report your results.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# code here\n```\n:::\n\n\n#### Exercise 8\n\nIs the aggregate data misleading? Use the code chunk below to investigate further.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# code here\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}