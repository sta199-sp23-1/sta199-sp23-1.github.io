{
  "hash": "77c73c15ae72990d0901e3bfaa8b2953",
  "result": {
    "markdown": "---\ntitle: \"Bootstrap\"\nsubtitle: \"STA 199\"\neditor: source\nformat: html\nexecute:\n  error: true\n---\n\n\n## Bulletin\n\n-   this `ae` is **due for grade**. Push your completed ae to GitHub within 48 hours to receive credit\n- project proposal feedback\n- [homework 4](/hw/hw-4.html) released\n\n## Getting started\n\nClone *your* `ae18-username` repo from the [GitHub organization](https://github.com/sta199-sp23-1/).\n\n\n## Today\n\nBy the end of today you will...\n\n- be able to draw a bootstrap sample and calculate a bootstrap statistic \n- use `infer` to obtain a bootstrap distribution \n- calculate a confidence interval from the bootstrap distribution\n- interpret a confidence interval in context of the data \n\n## Load packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidymodels)\n```\n:::\n\n\n## Load data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmanhattan = read_csv(\n  \"https://sta101-fa22.netlify.app/static/appex/data/manhattan.csv\"\n  )\n```\n:::\n\n\n## Notes (for reference)\n\n**Bootstrapping** is a re-sampling technique. The key idea is you have already collected a **sample** of size $N$ from the **population**. To create a **bootstrap** sample, you sample *with replacement* from your original sample $N$ times.\n\nLet's say you measure the height of five Duke students in meters:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nheights = c(1.51, 1.62, 1.89, 2.01, 1.78)\n\nstudents = data.frame(heights)\n```\n:::\n\n\nThere are many ways to create a bootstrap sample in R. We will focus on the `tidy` way below. which uses the `infer` package that loads with `tidymodels`.\n\n#### Example\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(2)\nstudents %>%\n  specify(response = heights) %>%\n  generate(reps = 1, type = \"bootstrap\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nResponse: heights (numeric)\n# A tibble: 5 × 2\n# Groups:   replicate [1]\n  replicate heights\n      <int>   <dbl>\n1         1    1.78\n2         1    1.51\n3         1    1.78\n4         1    1.51\n5         1    2.01\n```\n:::\n:::\n\n\n::: {.callout-note appearance=\"simple\"}\n## Note\n\nSampling is **random**. Notice the *seed* above ensures we get the same bootstrap sample.\n:::\n\nFrom here, we can compute a bootstrap statistic. E.g.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(2)\nstudents %>%\n  specify(response = heights) %>%\n  generate(reps = 1, type = \"bootstrap\") %>%\n  calculate(stat = \"median\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nResponse: heights (numeric)\n# A tibble: 1 × 1\n   stat\n  <dbl>\n1  1.78\n```\n:::\n:::\n\n\n\n## Example: rent in Manhattan\n\nOn a given day in 2018, twenty one-bedroom apartments were randomly selected on Craigslist Manhattan from apartments listed as \"by owner\". The data are in the `manhattan` data frame.  We will use this sample to conduct inference on the typical rent of 1 bedroom apartments in Manhattan. \n\n### Part 1: Drawing a bootstrap sample\n\nLet's start by using bootstrapping to estimate the **mean** rent of one-bedroom apartments in Manhattan. \n\n#### Exercise 1\n\nWhat is a **point estimate** (i.e. single number summary) of the typical rent? \n\n#### Exercise 2\n\nLet's bootstrap! \n\n- To bootstrap we will sample with replacement by drawing a value from the box. \n- How many draws do we need for our bootstrap sample? \n\nFill in  the values from the bootstrap sample conducted in class. Once the values are filled in, un-comment the code. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# class_bootstrap = c()\n```\n:::\n\n\n#### Exercise 3\n\n- About what value do you expect the bootstrap statistic to take? \n- Calculate the statistic from the bootstrap sample. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code\n```\n:::\n\n\n### Part 2: Bootstrap confidence interval\n\n**We will calculate a 95% confidence interval for the mean rent of one-bedroom apartments in Manhattan.**\n\nWe start by setting a seed to ensure our analysis is reproducible. \n\n#### Generating the bootstrap distribution\n\nWe can use R to take many bootstrap samples, compute a statistic and then view the bootstrap distribution of that statistic.\n\nUn-comment the lines and fill in the blanks to create the bootstrap distribution of sample means and save the results in the data frame `boot_dist`.    \n\nUse **1000 reps** for the in-class activity. (You will use about 10,000 reps for assignments outside of class.)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(7182022)\n\nboot_dist = manhattan #%>%\n  #specify(______) %>%\n  #generate(______) %>%\n  #calculate(______)\n```\n:::\n\n\n- How many rows are in `boot_dist`? \n- What does each row represent? \n- What are the variables in `boot_dist`? What do they mean?\n\n#### Visualize the bootstrap distribution \n\nA **sample statistic is a random variable**, we can look at its distribution.\n\nVisualize the bootstrap distribution using a histogram. Describe the shape and center of the distribution.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code\n```\n:::\n\n\n#### Calculate the confidence interval\n\nUncomment the lines and fill in the blanks to construct the 95% bootstrap confidence interval for the mean rent of one-bedroom apartments in Manhattan. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n#___ %>%\n#  summarize(lower = quantile(______),\n  #          upper = quantile(______))\n```\n:::\n\n\n#### Interpret the interval\n\nWrite the interpretation for the interval calculated above. \n\n- Question: Does a confidence interval have to be symmetric?\n\n- What is one advantage to using a 90% confidence interval instead of a 95% confidence interval to estimate a parameter? - What is one advantage to using a 99% confidence interval instead of a 95% confidence interval to estimate a parameter? ",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}